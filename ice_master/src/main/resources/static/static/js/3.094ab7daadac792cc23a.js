webpackJsonp([3],{BdIS:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={components:{ElForm:i("xrpo").a},data:function(){return{totalCount:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:50,userId:""},dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"编辑",create:"编辑考勤"},tempArticle:{id:"",userName:"",startDate:"",endDate:"",remark:""},value:"",revise:!1,add:!1,addWidth:"120px",startDate:"",endDate:""}},created:function(){this.getList()},methods:{getList:function(){var e=this;this.hasPerm("attendance:list")&&(this.listQuery="1",this.listLoading=!0,this.api({url:"/attendance/listAttendance",method:"get",params:this.listQuery}).then(function(t){e.listLoading=!1,e.list=t.list,e.totalCount=t.totalCount}))},handleSizeChange:function(e){this.listQuery.pageRow=e,this.handleFilter()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},getIndex:function(e){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+e+1},showUpdate:function(e){this.tempArticle.id=this.list[e].id,this.tempArticle.userName=this.list[e].userName,this.dialogStatus="update",this.dialogFormVisible=!0},updateArticle:function(){var e=this;this.api({url:"/attendance/updateAttendance",method:"post",data:this.tempArticle}).then(function(){e.getList(),e.dialogFormVisible=!1})}}},a={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-form",[i("el-form-item",{attrs:{label:"查询日期"}},[i("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"开始日期"},model:{value:e.formline.startDate,callback:function(t){e.$set(e.formline,"startDate",t)},expression:"formline.startDate"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"至","label-width":"25px"}},[i("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"结束日期"},model:{value:e.formline.endDate,callback:function(t){e.$set(e.formline,"endDate",t)},expression:"formline.endDate"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.search()}}},[e._v("查询")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",{domProps:{textContent:e._s(e.getIndex(t.$index))}})]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"userName",label:"用户名"}}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"开始时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.beginDate))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"结束时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.endDate))])]}}])}),e._v(" "),i("el-table-column",{attrs:{align:"center",label:"创建时间",width:"170"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"applyType",label:"申请类型"}}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"checkState",label:"状态"}}),e._v(" "),i("el-table-column",{staticStyle:{width:"60px"},attrs:{align:"center",prop:"remark",label:"备注"}}),e._v(" "),e.hasPerm("attendance:update")?i("el-table-column",{attrs:{align:"center",label:"管理",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"edit"},on:{click:function(i){e.showUpdate(t.$index)}}},[e._v("修改")])]}}])}):e._e()],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageRow,total:e.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"65%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{staticClass:"small-space",attrs:{model:e.tempArticle}},[i("el-form-item",{attrs:{label:"审批人：","label-width":e.addWidth}},[i("el-input",{model:{value:e.tempArticle.userName,callback:function(t){e.$set(e.tempArticle,"userName",t)},expression:"tempArticle.userName"}})],1),e._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:15}},[i("el-form-item",{attrs:{label:"审批时间：","label-width":e.addWidth}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:""},model:{value:e.tempArticle.checkTime,callback:function(t){e.$set(e.tempArticle,"checkTime",t)},expression:"tempArticle.checkTime"}})],1)],1)],1),e._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:10}},[i("el-form-item",{attrs:{label:"：","label-width":e.addWidth}},[i("el-input",{model:{value:e.tempArticle.remark,callback:function(t){e.$set(e.tempArticle,"remark",t)},expression:"tempArticle.remark"}})],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),"create"==e.dialogStatus?i("el-button",{attrs:{type:"success"},on:{click:e.createArticle}},[e._v("创 建")]):i("el-button",{attrs:{type:"primary"},on:{click:e.updateArticle}},[e._v("修 改")])],1)],1)],1)},staticRenderFns:[]},n=i("VU/8")(l,a,!1,null,null,null);t.default=n.exports},xrpo:function(e,t,i){"use strict";var l={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String},watch:{rules:function(){this.validate()}},data:function(){return{fields:[]}},created:function(){var e=this;this.$on("el.form.addField",function(t){t&&e.fields.push(t)}),this.$on("el.form.removeField",function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)})},methods:{resetFields:function(){this.model&&this.fields.forEach(function(e){e.resetField()})},clearValidate:function(){this.fields.forEach(function(e){e.clearValidate()})},validate:function(e){var t=this;if(this.model){var i=void 0;"function"!=typeof e&&window.Promise&&(i=new window.Promise(function(t,i){e=function(e){e?t(e):i(e)}}));var l=!0,a=0;return 0===this.fields.length&&e&&e(!0),this.fields.forEach(function(i,n){i.validate("",function(i){i&&(l=!1),"function"==typeof e&&++a===t.fields.length&&e(l)})}),i||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(e,t){var i=this.fields.filter(function(t){return t.prop===e})[0];if(!i)throw new Error("must call validateField with valid prop string!");i.validate("",t)}}},a={render:function(){var e=this.$createElement;return(this._self._c||e)("form",{staticClass:"el-form",class:[this.labelPosition?"el-form--label-"+this.labelPosition:"",{"el-form--inline":this.inline}]},[this._t("default")],2)},staticRenderFns:[]},n=i("VU/8")(l,a,!1,null,null,null);t.a=n.exports}});